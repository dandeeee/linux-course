<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
   <meta name="Generator" content="Far Editor">
   
   
   

<TITLE>Лабораторная работа 6.</TITLE>
<!--                                                                   -->



</head>

<body background=iip_1.jpg>
<p>

<table cellpadding=10>
<tr><td><a href=l1_5.html>Назад</a></td><td><a href=index.htm>Оглавление</a></td><td><a href=l1_7.html>Вперед</a></td></tr>
</table>
</p>
<hr>

<table width=90%>
<tr><td align=center><img src=logo_6.gif><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>
<h2 align=center>Лабораторная работа 6</h2>
<p><b>Цель работы</b>: ознакомление с базовыми правилами создания и применения 
командных скриптов.
</td></tr></table>

<h3>Выполнение  работы</h3>

<p>Сложная обработка текстов (и ряд других задач) требует выполнения довольно 
   длинных последовательностей команд. Поскольку ввод всех команд такой цепочки 
   может занять достаточно много времени и чреват ошибками, в Unix существует 
   понятие скрипта (сценария). Скрипт представляет собой любую 
   последовательность команд, сохраненную в файле.  Скрипт является текстовым 
   файлом и создается и редактируется средствами любого текстового редактора. 
   (Как и любой текстовый файл, скрипт может также создаваться и программой 
   или другим скриптом.) 
<ol>
<li>Программа-скрипт может быть выполнена при помощи команды <a href=./man/_sh.html>sh</a>:
   <pre>    sh <i>имя_файла_скрипта</I></pre>

<li>Программа-скрипт может стать командой Вашей системы, если Вы дадите
    ей право выполнения:
   <pre>    chmod u+x <i>имя_файла_скрипта</I></pre>
(вышеприведенным оператором право выполнять скрипт дается только владельцу файла-скрипта).
<p> После того, как это сделано, 
   скрипт может запускаться на выполнение так же, как и любая команда системы -
   вводом в командной строке имени файла-скрипта. При запуске скрипта на 
   выполнение, однако, может выдаться сообщение типа:
<pre>    :command not found</pre>
   Это сообщение связано с тем, что каталог, в котором записан скрпит, не 
   определен в системе как каталог, в котором ищутся команды. Для того, чтобы
   обойти это препятствие можно запускать скрипт с указанием пути к нему. 
   Например, если каталог, в котором находится скрипт, является текущим, то скрипт может быть 
   запущен командой вида:
<pre>    ./<i>имя_файла_скрипта</i></pre>
     
<li>Более универсальным способом обеспечения того, чтобы скрипт был найден,
   является определение каталога, в котором находится скрипт, в числе тех, 
   среди которых система ищет команды. В таких случаях в домашнем каталоге пользователя
   обычно создается подкаталог <samp>./bin</samp> и скрипт помещается в него,
   а затем имя этого каталога записывается в системную переменную 
   <samp>PATH</samp>:
<pre>    PATH=$PATH:$HOME/bin; export PATH</pre>

<p> Обратите внимание на имена <samp>$PATH</samp> и <samp>$HOME</samp>, фигурирующие
    в этой команде. Это имена стандартных переменных окружения. <samp>$PATH</samp> -
    имя переменной, хранящей перечень каталогов, в которых система
    ищет исполняемые файлы. Каталоги перечисляются в нем через символ "<samp>:</samp>",
    таким образом, в этой команде новый каталог добавляется к перечню, сохраняя также и
    те каталоги, которые были записаны в переменной окружения до этого. 
    <samp>$HOME</samp> - имя переменной, хранящей имя домашнего каталога пользователя.
<p> Значение переменной <samp>PATH</samp>, как и других переменных окружения 
    может быть проверено командой <a href=./man/_env.html><samp>env</samp></a>
<p> После того, как домашний каталог добавлен в <samp>PATH</samp>, скрипт может запускаться вводом в командной 
    строке имени файла-скрипта даже без указания каталога, в котором он размещен.
<p></p>
<li>Следующим шагом в обеспечении выполнения собственных скриптов является
    определение своего каталога в профиле пользователя. Профиль - это файл  
    <samp>$HOME/.prifile</samp>, содержащий различные команды. Команды из файла
    <samp>$HOME/.prifile</samp> выполняются при входе пользователя в систему.
    Таким образом, если включить в профиль установку переменной <samp>PATH</samp>,
    при каждом Вашем входе в систему Ваш каталог <samp>$HOME/bin</samp>
    будет включаться в <samp>PATH</samp> автоматически.
</ol>

<p>В ходе выполнения лабораторной работы Вам предстоит
создать последовательности команд, реализующих выполнение Вашей 
индивидуальной задачи (варианты задач - те же, что и в работе 4), а затем
для каждой последовательности выполнить следующие шаги:
<ol>
<li>Сохранить последовательность команд в файле, проверить выполнение 
    ее с помощью команды <samp>sh</samp>.
<li>Придать файлу-скрипту права на выполнение, проверить выполнение
    скрипта запуском из разных каталогов.
<li>После того, как будут выполнены проверки 1, 2 для всех трех скриптов,
    создать в своем домашнем каталоге подкаталог <samp>./bin</samp> и перенести в него файлы-скрипты.
    Включить созданный подкаталог в переменную <samp>PATH</samp> и проверить
    запуск скриптов из нескольких разных каталогов без указания пути.
<li>Создать в своем домашнем каталоге файл <samp>.profile</samp> и записать
    в него команду установки <samp>PATH</samp>. Выйти из системы и снова
    войти в нее. Проверить
    запуск скриптов из нескольких разных каталогов без указания пути.
</ol>
<p>Для протоколирования работы используйте команду 
<a href=./man/_script.html><samp>script</samp></a>.

<h3>Варианты индивидуальных заданий</h3>
<p><table width=100%>
 <tr>
  <td align=center width=20%>
   <A href=./var/v4_01.html>1</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_02.html>2</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_03.html>3</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_04.html>4</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_05.html>5</A>
  </td>   
 </tr>
 <tr>
  <td align=center width=20%>
   <A href=./var/v4_06.html>6</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_07.html>7</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_08.html>8</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_09.html>9</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_10.html>10</A>
  </td>   
 </tr>
 <tr>
  <td align=center width=20%>
   <A href=./var/v4_11.html>11</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_12.html>12</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_13.html>13</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_14.html>14</A>
  </td>   
  <td align=center width=20%>
   <A href=./var/v4_15.html>15</A>
  </td>   
 </tr>
</table>

<h3>Предъявление результатов и содержание отчета.</h3>
<p>Отчет по лабораторной работе 6 должен содержать протокол выполнения указанных
выше шагов задания.
<p><a href=ex1_6.html>Пример</a> выполнения задания.


<h3>Справка</h3>
<ul>
<li>команда <a href=./man/_sh.html><samp>sh</samp></a><br>
<li>команда <a href=./man/_env.html><samp>env</samp></a><br>
<li>команда <a href=./man/_chmd.html><samp>chmod</samp></a><br>
<li><a href=./man/shindex.htm>командный интерпретатор <samp>shell</samp></a>
</ul>

<hr>
<p>
<table cellpadding=10>
<tr><td><a href=l1_5.html>Назад</a></td><td><a href=index.htm>Оглавление</a></td><td><a href=l1_7.html>Вперед</a></td></tr>
</table>


</body>
</html>

