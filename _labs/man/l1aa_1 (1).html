<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<TITLE>Файловая система.</TITLE>
</head>

<body background=../iip_1.jpg>
<h2 align=center>Файловая система ОС UNIX</h2>

<h3>Иерархическая структура файловой системы</h3>

<p>Файловая система является краеугольным камнем операционной системы UNIX. 
   Она обеспечивает логический метод организации, восстановления и управления 
   информацией. 
<p>Строго говоря, следует различать физическую файловую систему, которая 
   отвечает за управление дисковым пространством и размещение файлов в 
   физических адресах диска и логическую файловую систему, которая 
   обеспечивает логическую структуру хранения файлов - пространство имен 
   файлов. ОС Unix и Linux могут работать с различными физическими файловыми 
   системами, но логическое представление файловой системы в Unix/Linux всегда 
   одинаково. В данном документе везде под термином "файловая система" 
   понимается "логическая файловая система".
<p>Все файлы, с которыми могут манипулировать пользователи, располагаются в 
   файловой системе, представляющей собой дерево, промежуточные вершины 
   которого соответствуют каталогам, и листья - файлам и пустым каталогам. 
   Реально на каждом логическом диске (разделе физического дискового пакета)
   располагается отдельная иерархия каталогов и файлов. Для получения общего
   дерева в динамике используется "монтирование" отдельных иерархий к
   фиксированной корневой файловой системе в качестве ветвей общего дерева. 
<p>Каждый каталог и файл файловой системы имеет уникальное полное имя - имя,
   задающее полный путь, оно задает полный путь от корня файловой системы
   через цепочку каталогов к соответствующему каталогу или файлу). Каталог,
   являющийся корнем файловой системы (корневой каталог), в любой файловой
   системе имеет предопределенное имя <samp>"/"</samp> (слэш). Этот же символ
   используется как разделитель имен в пути. Полное имя файла, например, 
   <samp>/bin/sh</samp> означает, что в корневом каталоге должно содержаться
   имя каталога <samp>bin</samp>, а в каталоге <samp>bin</samp> должно
   содержаться имя файла <samp>sh</samp>. Коротким или относительным именем
   файла  называется имя (возможно, составное), задающее путь к файлу от
   текущего рабочего каталога (существует команда и соответствующий системный
   вызов, позволяющие установить текущий рабочий каталог). 
<p>В каждом каталоге содержатся два специальных имени, имя <samp>"."</samp>,
   именующее сам этот каталог, и имя <samp>".."</samp>, именующее 
   "родительский" каталог данного каталога, т.е. каталог, непосредственно 
   предшествующий данному в иерархии каталогов. 
<p>Так, например, для структуры, показанной на следующем рисунке доступ к
   отмеченному на рисунке файлу из текущего каталога возможен по полному имени: 
<pre>
/home/apalko/file2
</pre>
или по относительному имени:
<pre>
./../../apalko/file2
</pre>

<p align=center><img src=l1aa_1.gif>

<p>Каталогам или файлам любые имена в соответствии со следующими правилами:
<ul>
<li>допустимы все символы, за исключением <samp>/</samp>; 
<li>некоторые имена лучше не использовать, такие как пробел, табуляция и 
    следующие: <samp>? " # $ ^ ( ) ; &lt; &gt; [ ] | \ * @ ' ~ &amp;</samp>. 
    Если Вы воспользуетесь символами <samp>пробела</samp> или 
    <samp>табуляции</samp> в имени файла или справочника, то Вы должны
    заключить имя в двойные кавычки в командной строке; 
<li>избегайте использования знаков <samp>+</samp> <samp>-</samp> или 
    <samp>.</samp> в качестве первого символа в имени файла; 
<li>система UNIX различает большие и маленькие буквы именах файлов и каталогов. 
</ul>
<h3>Виды файлов</h3>

<p>В ОС UNIX понятие файла является универсальной абстракцией, позволяющей работать с обычными файлами, содержащимися на устройствах внешней памяти; с устройствами, вообще говоря, отличающимися от устройств внешней памяти; с информацией, динамически генерируемой другими процессами и т.д. Для поддержки этих возможностей единообразным способом файловые системы ОС UNIX поддерживают несколько типов файлов, наиболее существенные из которых мы рассмотрим в этом разделе. 

<h4>Обычные файлы</h4>

<p>Обычные (или регулярные) файлы реально представляют собой набор блоков на устройстве внешней памяти, на котором поддерживается файловая система. Такие файлы могут содержать как текстовую информацию, так и произвольную двоичную информацию. Файловая система не предписывает обычным файлам какую-либо структуру, обеспечивая на уровне пользователей представление обычного файла как последовательности байтов.
<p> (Для некоторых файлов, которые должны интерпретироваться компонентами самой операционной системы, UNIX поддерживает фиксированную структуру. Наиболее важным примером таких файлов являются объектные и выполняемые файлы. Структура этих файлов поддерживается компиляторами, редакторами связей и загрузчиком. Однако, эта структура неизвестна файловой системе. Для нее такие файлы по-прежнему являются обычными файлами.) 

<h4>Файлы-каталоги</h4>

<p>Наличие обычных файлов недостаточно для организации иерархических файловых
   систем. Требуется наличие каталогов, которые сопоставляют имена файлов или
   каталогов с их физическим описанием. Каталоги представляют собой особый вид
   файлов, которые хранятся во внешней памяти подобно обычным файлам, но
   структура которых поддерживается самой файловой системой. 
<p>Файлам-каталогам соответствует особый тип файла, по отношению к которому
   возможно выполнение только специального набора системных вызовов и команд.
   Отсутствует системный вызов, позволяющий прямо писать в файл-каталог. 
   Запись в файлы-каталоги производится неявно при создании и уничтожении
   файлов и каталогов.

<h4>Специальные файлы</h4>

<p>Специальные файлы не хранят данные. Они обеспечивают механизм отображения
   физических внешних устройств в имена файлов файловой системы. Каждому
   устройству, поддерживаемому системой, соответствует, по меньшей мере, один
   специальный файл. При выполнении чтения или записи по отношению к
   специальному файлу, производится прямой вызов соответствующего драйвера,
   программный код которого отвечает за передачу данных между процессом
   пользователя и соответствующим физическим устройством. При этом имена
   специальных файлов можно использовать практически всюду, где можно
   использовать имена обычных файлов. 

<h4>Связывание файлов с разными именами</h4>

<p>Файловая система ОС UNIX обеспечивает возможность связывания одного и того же файла с разными именами. При этом ссылки (link) на один и тот же файл могут располагаться в одном и том же каталоге, тогда локальные их имена обязательно должны быть разными, или в разных каталогах, тогда локальные их имена могут совпадать.  
<p>Ссылки, о которых идет речь, являются "жесткими" связями и представляют
   собой ссылки на один и тот же физический файл из двух или более элементов
   каталога. Удаление файла по одной из ссылок приводит к удалению только
   элемента каталога, сам же файл сохраняется и может быть доступен по другим
   ссылкам. Физический файл удаляется только при удалении последней ссылки на
   него.
<p>"Символическая" связь или "мягкая" ссылка представляет собой ссылку не на физический файл, а 
   на другой элемент каталога. При установлении символических связей
   только один элемент
   каталога ссылается на физический файл, и при удалении по этому имени
   физический файл также удаляется (если у него нет помимо этого жестких
   связей), а элементы каталога, ссылающиеся на удаленный, остаются, но
   становятся "неразрешенными ссылками", обращения по этим именам приводят к
   ошибкам.


<h4>Именованные программные каналы</h4>

<p>Программный канал - одно из средств межпроцессных взаимодействий в ОС UNIX. 
   Именованному программному каналу обязательно соответствует элемент 
   некоторого каталога. 
<hr>
<p></p>
</body>
</html>
