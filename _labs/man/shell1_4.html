<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
   <meta name="Author" content="NPO KLOTO">
   <meta name="Generator" content="Far Editor">
   <meta name="Description" content="Unix">
   <meta name="Keywords" content="unix, shell">
   <title> Интерпретатор командного языка shell. 4</title>
<!--                                                                   -->
</head>

<body background=../iip_1.jpg>
<p>
<table cellpadding=10>
<tr><td><a href=mind.html>Список команд</a></td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=shell1_3.html>Назад</a></td><td><a href=shindex.html>Оглавление</a></td><td><a href=shell1_5.html>Вперед</a></td></tr>
</table>
</p>
<hr>
<a name=4></a>
<h3 align=center>4. Выполнение shell-программ </h3>
<a name=4_1></a>
<h4> 4.1. Запуск shell'а</h4>
<p align=justify>Программа, интерпретирующая shell-программы,  находится  в файле /bin/sh. При запуске ее первый аргумент  является  именем shell-программы, остальные передаются как позиционные  параметры. Если файл, содержащий shell-программу, имеет  право  выполнения (x), то достаточно указания лишь его имени.  Например, следующие две команды операционной системы  эквивалентны  (если файл ficofl обладает указанным правом и на самом деле  содержит shell-программу):
<pre>
        sh ficofl -d . g\*
и
        ficofl -d . g\*
</pre>
<a name=4_2></a>
<h4> 4.2. Выполнение</h4>
<p align=justify>При выполнении shell-программ выполняются все подстановки. Если имя команды совпадает с именем специальной команды, то она выполняется в рамках текущего процесса. Так  же  выполняются  и определенные пользователем функции. Если имя команды не  совпадает ни с именем специальной команды, ни с именем  функции,  то порождается новый процесс и  осуществляется  попытка  выполнить указанную команду.
<p align=justify>Переменная PATH определяет путь поиска директории,  содержащей   данную   команду.   По   умолчанию   это
<pre>
        ::/bin:/usr/ bin:/util:/dss/rk
</pre>
<p align=justify>Директории поиска разделяются двоеточиями; :: означает  текущую директорию. Если имя команды содержит символ /, значение  $PATH не используется: имена, начинающиеся с / ищутся от  корня,  остальные - от текущей директории.  Положение  найденной  команды запоминается shellом и может быть опрошено командой hash.
<a name=4_3></a>
<h4> 4.3. Окружение</h4>
<p align=justify>Окружение - это набор пар имя-значение, которые передаются выполняемой программе. Shell взаимодействует с окружением  несколькими способами. При запуске shell  создает  переменную  для каждой указанной пары, придавая  ей  соответствующее  значение. Если вы измените значение какой-либо  из  этих  переменных  или создадите новую переменную, то это не окажет  никакого  влияния на окружение, если не будет  использована  команда  export  для связи переменной shell'а с окружением (см. также set -a).  Переменная может быть удалена из окружения  командой  unset  (см.). Таким образом, окружение каждой из выполняемых  shell'ом  команд формируется из всех неизмененных пар имя-значение, первоначально полученных shell'ом, минус пары,  удаленные  командой  unset, плюс все модифицированные и измененные пары, которые для  этого должны быть указаны в команде export.
<p align=justify>Окружение простых команд может быть сформировано указанием перед ней одного или нескольких присваиваний переменным. Так,
<pre>
        TERM=d460 &lt;команда>
и
        (export TERM; TERM=d460; &lt;команда>)
</pre>
<p align=justify>эквивалентны. Переменные, участвующие  в  таких  присваиваниях, назовем ключевыми параметрами.
<p align=justify>Если установлен флаг -k (см. set), то все  ключевые  параметры помещаются в окружение команды, даже  если  они  записаны после команды.
<a name=4_4></a>
<h4> 4.4. Сигналы</h4>
<p align=justify>     UNIX'ом поддерживаются следующие сигналы:
<p><table border=0>
<tr valign=top><td>SIGHUP <td> - 1  - <td> отменить (hangup)
<tr valign=top><td>SIGINT <td> - 2  - <td> прерывание (interrupt)
<tr valign=top><td>SIGQUIT <td>- 3  - <td> нестандартный выход (quit)
<tr valign=top><td>SIGILL <td> - 4  - <td> неверная команда (illegal instruction)
<tr valign=top><td>SIGTRAP <td>- 5  - <td> ловушка (trace trap)
<tr valign=top><td>SIGFPE <td> - 8  - <td> исключительная ситуация при выполнении операций с плавающей запятой (floating-point exception)
<tr valign=top><td>SIGKILL <td>- 9  - <td> уничтожение процесса (kill)
<tr valign=top><td>SIGBUS <td> - 10 - <td> ошибка шины  (bus error)
<tr valign=top><td>SIGSEGV <td>- 11 - <td> нарушение сегментации (segmentation violation)
<tr valign=top><td>SIGSYS <td> - 12 - <td> неверный системный вызов (bad argument to  system call)
<tr valign=top><td>SIGPIPE <td>- 13 - <td> запись в канал без чтения из него (write  on  a  pipe with no one to read it)
<tr valign=top><td>SIGALRM <td>- 14 - <td> будильник (alarm clock)
<tr valign=top><td>SIGTERM <td>- 15 - <td> программное завершение процесса (software  termination  signal)
</TABLE>
<p align=justify>Сигналы SIGINT и SIGQUIT игнорируются, если  команда  была запущена асинхронно. Иначе сигналы обрабатываются так же, как в процессе-предке, за исключением сигнала SIGSEGV (см. также Специальные команды. Trap).
<a name=4_5></a>
<h4> 4.5. Замечания</h4>
<p align=justify>     При выполнении команд  запоминается  их  местонахождение. Поэтому при создании команды с тем же именем, но находящейся  в другой директории, все равно будет выполняться  старая  команда (если вызов происходит по короткому имени). Для исправления ситуации воспользуйтесь командой hash с ключом -r (см.  Специальные команды).
<p align=justify>Если вы переименовали текущую или вышележащую  директорию, то команда pwd может давать неверную информацию. Для  исправления ситуации воспользуйтесь командой cd с полным именем  директории.
<p><hr>
<table cellpadding=10>
<tr><td><a href=shell1_3.html>Назад</a></td><td><a href=shindex.html>Оглавление</a></td><td><a href=shell1_5.html>Вперед</a></td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=mind.html>Список команд</a></td></tr>
</table>
</p>
</body>
</html>
